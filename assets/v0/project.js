
!function(){function i(n){(n||document).querySelectorAll(".project-player_wrap").forEach(function(n){if(n.__ppInit)return;n.__ppInit=1;var e=n.querySelector(".project-player_stage")||n,t=e.getAttribute("data-project-slug")||n.getAttribute("data-project-slug")||"",a=e.getAttribute("data-video")||n.getAttribute("data-video")||"",o=e.getAttribute("data-captions")||n.getAttribute("data-captions")||"",r=e.getAttribute("data-poster")||n.getAttribute("data-poster")||"",l=e.querySelector(".project-player_video-host")||n.querySelector(".project-player_video-host");if(!l||!a)return;var d=n.querySelector(".project-player_pausefx");d||(d=document.createElement("div"),d.className="project-player_pausefx u-cover-absolute u-inset-0",(n.querySelector(".project-player_stage")||n).appendChild(d));var s=n.querySelector(".project-player_center-toggle");s||(s=document.createElement("button"),s.className="project-player_center-toggle project-player_btn project-player_btn--play",s.type="button",s.setAttribute("aria-pressed","false"),s.setAttribute("aria-label","Unmute"),s.style.color="#fff",s.innerHTML='<svg viewBox="0 0 24 24" class="pp-icon" aria-hidden="true" fill="none"><g class="pp-icon--group pp-icon--sound"><path d="M12 5V19L7 16H2V8H7L12 5Z"></path><path d="M19.3 19.3C21.0459 17.2685 22.0059 14.6786 22.0059 12C22.0059 9.3214 21.0459 6.73148 19.3 4.70001"></path><path d="M16.4 16.4C17.4429 15.1711 18.0154 13.6118 18.0154 12C18.0154 10.3882 17.4429 8.82888 16.4 7.60001"></path></g><g class="pp-icon--group pp-icon--play"><g class="pp-icon__part pp-icon__play"><path d="M5.2 12V3L13 7.5L20.8 12L13 16.5L5.2 21V12Z"></path></g><g class="pp-icon__part pp-icon__pause"><path d="M9.5 5.5H6.5V18.5H9.5V5.5Z"></path><path d="M17.5 5.5H14.5V18.5H17.5V5.5Z"></path></g></g></svg><span class="u-sr-only">Unmute</span>',(n.querySelector(".project-player_stage")||n).appendChild(s));var u=l.querySelector("video");u||(u=document.createElement("video"),l.appendChild(u)),u.className="project-player_video",u.controls=!1,u.setAttribute("playsinline",""),u.playsInline=!0,u.muted=!0,u.setAttribute("muted",""),u.setAttribute("autoplay",""),u.preload="auto",u.crossOrigin="anonymous",r&&(u.poster=r),u.src!==a&&(u.src=a,function(){try{u.load()}catch(n){}}()),o&&!u.querySelector('track[kind="subtitles"],track[kind="captions"]')&&function(){var n=document.createElement("track");n.kind="subtitles",n.label="English",n.srclang="en",n.src=o,u.appendChild(n)}();var c=n.querySelector('[data-role="play"]'),m=n.querySelector('[data-role="mute"]'),p=n.querySelector('[data-role="mute-label"]'),f=n.querySelector('[data-role="fs"]'),h=n.querySelector('[data-role="timeline"]'),v=n.querySelector(".project-player_timeline-buffer"),g=n.querySelector(".project-player_timeline-handle"),y=0,b=!1,_=!1;function w(n){var e=n?"true":"false";c&&(c.setAttribute("aria-pressed",e),c.classList.toggle("is-playing",n)),s&&s.classList.contains("is-mode-play")&&(s.setAttribute("aria-pressed",e),s.classList.toggle("is-playing",n))}function E(n){m&&(m.setAttribute("aria-pressed",n?"true":"false"),p?p.textContent=n?"Sound":"Mute":m.textContent=n?"Sound":"Mute")}function S(e){n.classList.toggle("is-paused",!!e)}function T(n){n?1:0;n?1:0;n?1:0;n?1:0;n?1:0;n?1:0}function L(n){clearTimeout(y),n=n?1:0,n=n?1:0,n=n?1:0,n=n?1:0,n=n?1:0;T(!1),y=setTimeout(function(){T(!0)},1800)}function C(){if(isFinite(u.duration)){var n=u.currentTime/u.duration*100;g&&(g.style.left=n+"%"),h&&h.setAttribute("aria-valuenow",String(Math.round(n))),u.buffered&&u.buffered.length&&v&&(n=u.buffered.end(u.buffered.length-1),v.style.width=Math.min(100,n/u.duration*100)+"%")}}function x(n){isFinite(u.duration)&&(n=Math.max(0,Math.min(100,n)),u.currentTime=n/100*u.duration,C())}function M(){if(s){s.classList.add("is-mode-play"),s.setAttribute("aria-label","Play/Pause");var n=!u.paused;s.classList.toggle("is-playing",n),s.setAttribute("aria-pressed",n?"true":"false")}}async function k(n){n.readyState<2&&await new Promise(function(n){var e=function(){n()};u.addEventListener("loadeddata",e,{once:!0}),u.addEventListener("canplay",e,{once:!0}),setTimeout(e,3e3)});try{"fastSeek"in n?n.fastSeek(0):n.currentTime=Math.max(1e-5,n.currentTime)}catch(n){}try{n.muted=!0,n.setAttribute("muted","");var e=n.play&&n.play();e&&e.then&&await e.catch(function(){})}catch(n){}await new Promise(function(e){var t=!1,a=setTimeout(function(){t||(t=!0,e())},800),o=function(){t||(t=!0,clearTimeout(a),n.removeEventListener("timeupdate",o),requestAnimationFrame(e))};n.addEventListener("timeupdate",o,{once:!0})})}async function q(){try{if(u.paused){if(u.muted||0===u.volume){u.muted=!1,u.removeAttribute("muted");var n=Number(localStorage.getItem("pp:vol")||1)||1;u.volume=n,E(!1),_=!0}await u.play()}else await u.pause()}catch(n){}w(!u.paused),S(u.paused),L()}c&&c.addEventListener("click",q),s&&s.addEventListener("click",async function(){if(s.classList.contains("is-mode-play"))await q();else{try{u.muted=!1,u.removeAttribute("muted");var n=Number(localStorage.getItem("pp:vol")||1)||1;u.volume=n;try{"fastSeek"in u?u.fastSeek(0):u.currentTime=0}catch(n){try{u.currentTime=0}catch(n){}}await(u.play&&u.play()),M(),E(!1),w(!0),S(!1),_=!0}catch(n){}L()}}),m&&m.addEventListener("click",async function(){var n=u.muted;if(u.muted=!u.muted,u.muted)u.setAttribute("muted","");else{u.removeAttribute("muted"),0===u.volume&&(u.volume=Number(localStorage.getItem("pp:vol")||1)||1),n&&!_&&(_=!0,try{"fastSeek"in u?u.fastSeek(0):u.currentTime=0}catch(n){try{u.currentTime=0}catch(n){}}try{await(u.play&&u.play())}catch(n){}w(!0),S(!1),M())}localStorage.setItem("pp:muted",u.muted?"1":"0"),E(u.muted),L()}),document.addEventListener("fullscreenchange",function(){if(f){var e=!!document.fullscreenElement&&(document.fullscreenElement===n||n.contains(document.fullscreenElement));f.textContent=e?"Minimise":"Fullscreen",f.setAttribute("aria-label",e?"Exit fullscreen":"Toggle fullscreen")}}),f&&f.addEventListener("click",async function(){try{document.fullscreenElement?await(document.exitFullscreen&&document.exitFullscreen()):await(n.requestFullscreen&&n.requestFullscreen())}catch(n){}L()}),h&&(h.addEventListener("pointerdown",function(n){b=!0,h.setPointerCapture&&h.setPointerCapture(n.pointerId);var e=h.getBoundingClientRect();x((n.clientX-e.left)/e.width*100),L()}),h.addEventListener("pointermove",function(n){if(b){var e=h.getBoundingClientRect();x((n.clientX-e.left)/e.width*100)}}),h.addEventListener("pointerup",function(){b=!1}),h.addEventListener("pointercancel",function(){b=!1}),h.addEventListener("keydown",function(n){var e=n.shiftKey?10:5,t=Number(h.getAttribute("aria-valuenow")||0);"ArrowRight"===n.key&&(x(t+e),n.preventDefault()),"ArrowLeft"===n.key&&(x(t-e),n.preventDefault())})),["mousemove","pointermove","touchstart","keydown"].forEach(function(e){n.addEventListener(e,L,{passive:!0})}),L(),(async function(){if(!document.body.contains(n))return void requestAnimationFrame(function(){i(document)});await k(u),requestAnimationFrame(function(){try{u.play&&u.play()}catch(n){}}),w(!u.paused),S(u.paused);var e=null;try{var a=sessionStorage.getItem("videoIntent");if(a){var o=JSON.parse(a);o&&(!t||o.slug===t)&&Date.now()-o.t<1e4&&(e=o)}}catch(n){}e&&e.withSound?function(){try{u.muted=!1,u.removeAttribute("muted"),u.volume=Number(localStorage.getItem("pp:vol")||1)||1,u.play&&u.play(),E(!1),_=!0,S(!1),M()}catch(n){E(!0)}}():(s&&(s.classList.remove("is-mode-play"),s.setAttribute("aria-label","Unmute")),E(!0)),u.addEventListener("play",function(){w(!0),S(!1)}),u.addEventListener("playing",function(){S(!1)}),u.addEventListener("pause",function(){w(!1),S(!0)}),u.addEventListener("ended",function(){w(!1),S(!0)}),u.addEventListener("timeupdate",function(){b||C()}),u.addEventListener("progress",C)})();var A=new MutationObserver(function(){document.body.contains(n)||(function(){try{u.pause(),u.muted=!0}catch(n){}}(),A.disconnect())});A.observe(document.body,{childList:!0,subtree:!0})})}document.addEventListener("DOMContentLoaded",function(){i(document)}),document.addEventListener("page:enter",function(n){var e=n&&n.detail&&n.detail.container||document;requestAnimationFrame(function(){i(e)})})}();

