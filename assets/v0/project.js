!function(){function d(e){(e||document).querySelectorAll(".project-player_wrap").forEach(function(e){if(e.__ppInit)return;e.__ppInit=1;var t=e.querySelector(".project-player_stage")||e,r=t.getAttribute("data-video")||e.getAttribute("data-video")||"",n=t.querySelector(".project-player_video-host")||e.querySelector(".project-player_video-host");if(!n||!r)return;var a=e.querySelector(".project-player_pausefx");a||(a=document.createElement("div"),a.className="project-player_pausefx u-cover-absolute u-inset-0",(e.querySelector(".project-player_stage")||e).appendChild(a));var o=e.querySelector(".project-player_center-toggle");o||(o=document.createElement("button"),o.className="project-player_center-toggle project-player_btn project-player_btn--play",o.type="button",o.setAttribute("aria-pressed","false"),o.setAttribute("aria-label","Unmute"),o.style.color="#fff",o.innerHTML='<svg viewBox="0 0 24 24" class="pp-icon" aria-hidden="true" fill="none"><g class="pp-icon--group pp-icon--sound"><path d="M12 5V19L7 16H2V8H7L12 5Z"></path><path d="M19.3 19.3C21.046 17.269 22.006 14.679 22.006 12S21.046 6.731 19.3 4.7"></path><path d="M16.4 16.4C17.443 15.171 18.015 13.612 18.015 12S17.443 8.829 16.4 7.6"></path></g><g class="pp-icon--group pp-icon--play"><g class="pp-icon__part pp-icon__play"><path d="M5.2 12V3L13 7.5L20.8 12L13 16.5L5.2 21V12Z"></path></g><g class="pp-icon__part pp-icon__pause"><path d="M9.5 5.5H6.5V18.5H9.5V5.5Z"></path><path d="M17.5 5.5H14.5V18.5H17.5V5.5Z"></path></g></g></svg><span class="u-sr-only">Unmute</span>',(e.querySelector(".project-player_stage")||e).appendChild(o));var i=n.querySelector("video");i||(i=document.createElement("video"),n.appendChild(i));var l=e.querySelector('[data-role="play"]'),s=e.querySelector('[data-role="mute"]'),u=e.querySelector('[data-role="mute-label"]'),c=e.querySelector('[data-role="fs"]'),f=e.querySelector('[data-role="timeline"]'),p=e.querySelector(".project-player_timeline-buffer"),m=e.querySelector(".project-player_timeline-handle");i.className="project-player_video",i.controls=!1,i.setAttribute("playsinline",""),i.playsInline=!0,i.muted=!0,i.setAttribute("muted",""),i.setAttribute("autoplay",""),i.preload="auto",i.crossOrigin="anonymous",t.getAttribute("data-poster")&&(i.poster=t.getAttribute("data-poster")),i.src!==r&&(i.src=r,function(){try{i.load()}catch(e){}}());(t.getAttribute("data-captions")||e.getAttribute("data-captions"))&&!i.querySelector('track[kind="subtitles"],track[kind="captions"]')&&function(){var t=document.createElement("track");t.kind="subtitles",t.label="English",t.srclang="en",t.src=e.getAttribute("data-captions")||"",t.default=!1,i.appendChild(t)}();var v=0,h=!1;function y(t){var r=t?"true":"false";l&&(l.setAttribute("aria-pressed",r),l.classList.toggle("is-playing",t)),o&&o.classList.contains("is-mode-play")&&(o.setAttribute("aria-pressed",r),o.classList.toggle("is-playing",t))}function g(t){s&&(s.setAttribute("aria-pressed",t?"true":"false"),u?u.textContent=t?"Sound":"Mute":s.textContent=t?"Sound":"Mute")}function b(t){e.classList.toggle("is-paused",!!t)}function S(){clearTimeout(v),e.dataset.idle="0",v=setTimeout(function(){e.dataset.idle="1"},1800)}function E(){if(isFinite(i.duration)){var e=i.currentTime/i.duration*100;m&&(m.style.left=e+"%"),f&&f.setAttribute("aria-valuenow",String(Math.round(e))),i.buffered&&i.buffered.length&&p&&(e=i.buffered.end(i.buffered.length-1),p.style.width=Math.min(100,e/i.duration*100)+"%")}}function L(e){isFinite(i.duration)&&(e=Math.max(0,Math.min(100,e)),i.currentTime=e/100*i.duration,E())}function T(){if(o){o.classList.add("is-mode-play"),o.setAttribute("aria-label","Play/Pause");var e=!i.paused;o.classList.toggle("is-playing",e),o.setAttribute("aria-pressed",e?"true":"false")}}async function q(e){if(e.readyState<2)await new Promise(function(t){var r=function(){t()};e.addEventListener("loadeddata",r,{once:!0}),e.addEventListener("canplay",r,{once:!0}),setTimeout(r,3e3)});try{"fastSeek"in e?e.fastSeek(0):e.currentTime=Math.max(1e-5,e.currentTime)}catch(e){}try{e.muted=!0,e.setAttribute("muted","");var t=e.play&&e.play();t&&t.then&&await t.catch(function(){})}catch(e){}await new Promise(function(t){var r=!1,n=setTimeout(function(){r||(r=!0,t())},800),a=function(){r||(r=!0,clearTimeout(n),e.removeEventListener("timeupdate",a),requestAnimationFrame(t))};e.addEventListener("timeupdate",a,{once:!0})})}async function A(){for(var e=0;e<3;e++){try{if(await i.play(),!i.paused)return!0}catch(e){}await new Promise(function(e){return setTimeout(e,120)})}return!1}async function C(){try{if(i.paused){if(i.muted||0===i.volume){i.muted=!1,i.removeAttribute("muted");var e=Number(localStorage.getItem("pp:vol")||1)||1;i.volume=e,g(!1),h=!0}await i.play()}else await i.pause()}catch(e){}y(!i.paused),b(i.paused),S()}l&&l.addEventListener("click",C),o&&o.addEventListener("click",async function(){if(o.classList.contains("is-mode-play"))await C();else{try{i.muted=!1,i.removeAttribute("muted");var e=Number(localStorage.getItem("pp:vol")||1)||1;i.volume=e;try{"fastSeek"in i?i.fastSeek(0):i.currentTime=0}catch(e){try{i.currentTime=0}catch(e){}}await(i.play&&i.play()),T(),g(!1),y(!0),b(!1),h=!0}catch(e){}S()}}),s&&s.addEventListener("click",async function(){var e=i.muted;if(i.muted=!i.muted,i.muted)i.setAttribute("muted","");else{if(i.removeAttribute("muted"),0===i.volume&&(i.volume=Number(localStorage.getItem("pp:vol")||1)||1),e&&!h){h=!0;try{"fastSeek"in i?i.fastSeek(0):i.currentTime=0}catch(e){try{i.currentTime=0}catch(e){}}try{await(i.play&&i.play())}catch(e){}y(!0),b(!1),T()} }localStorage.setItem("pp:muted",i.muted?"1":"0"),g(i.muted),S()}),document.addEventListener("fullscreenchange",function(){if(c){var t=!!document.fullscreenElement&&(document.fullscreenElement===e||e.contains(document.fullscreenElement));c.textContent=t?"Minimise":"Fullscreen",c.setAttribute("aria-label",t?"Exit fullscreen":"Toggle fullscreen")}}),c&&c.addEventListener("click",async function(){try{document.fullscreenElement?await(document.exitFullscreen&&document.exitFullscreen()):await(e.requestFullscreen&&e.requestFullscreen())}catch(e){}S()}),f&&(f.addEventListener("pointerdown",function(e){f.setPointerCapture&&f.setPointerCapture(e.pointerId);var t=f.getBoundingClientRect();L((e.clientX-t.left)/t.width*100),S()}),f.addEventListener("pointermove",function(e){if(1===e.buttons){var t=f.getBoundingClientRect();L((e.clientX-t.left)/t.width*100)}}),f.addEventListener("keydown",function(e){var t=e.shiftKey?10:5,r=Number(f.getAttribute("aria-valuenow")||0);"ArrowRight"===e.key&&(L(r+t),e.preventDefault()),"ArrowLeft"===e.key&&(L(r-t),e.preventDefault())})),["mousemove","pointermove","touchstart","keydown"].forEach(function(t){e.addEventListener(t,S,{passive:!0})}),S(),(async function(){await q(i);var e=await A();e||(i.muted=!0,i.setAttribute("muted",""),await A());y(!i.paused),b(i.paused);o&&(o.classList.remove("is-mode-play"),o.setAttribute("aria-label","Unmute")),g(!0),i.addEventListener("play",function(){y(!0),b(!1)}),i.addEventListener("playing",function(){b(!1)}),i.addEventListener("pause",function(){y(!1),b(!0)}),i.addEventListener("ended",function(){y(!1),b(!0)}),i.addEventListener("timeupdate",E),i.addEventListener("progress",E)})();var P=new MutationObserver(function(){document.body.contains(e)||(function(){try{i.pause(),i.muted=!0}catch(e){}}(),P.disconnect())});P.observe(document.body,{childList:!0,subtree:!0})})}document.addEventListener("DOMContentLoaded",function(){d(document)}),document.addEventListener("barba:once",function(e){d(e&&e.detail&&e.detail.container||document)}),document.addEventListener("barba:enter",function(e){d(e&&e.detail&&e.detail.container||document)})}();
