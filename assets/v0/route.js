/*! route.js â€” Barba bootstrap with module-wait + Webflow reinit */
!function(){"use strict";if(window.__ROUTER_INIT__)return;window.__ROUTER_INIT__=1;function e(){return!!(window.barba&&barba.init)}function t(e){if(!e)return!0;const t=new URL(e.href,location.href);return!!e.hasAttribute("download")||!!(e.target&&"_self"!==e.target)||t.origin!==location.origin||!!e.hasAttribute("data-barba-prevent")||"#"===e.getAttribute("href")}const n=(()=>{let e,t=280;function n(){return e&&document.body.contains(e)?e:(e=document.createElement("div"),e.style.cssText="position:fixed;inset:0;background:var(--_theme---background,#000);pointer-events:none;opacity:0;z-index:9999;transition:opacity .28s;",document.body.appendChild(e),e)}function o(e){return new Promise((t=>setTimeout(t,e)))}return{leave:async()=>{n(),e.style.opacity="1",await o(t)},enter:async()=>{n(),e.style.opacity="0",await o(t)}}})();function o(){try{if(!window.Webflow)return;window.Webflow.destroy&&window.Webflow.destroy(),window.Webflow.ready&&window.Webflow.ready();const e=window.Webflow.require&&window.Webflow.require("ix2");e&&e.init&&e.init()}catch{}}function a(e){const t=e&&e.dataset&&e.dataset.barbaNamespace;try{"home"===t&&window.Pages&&window.Pages.home&&window.Pages.home.destroy&&window.Pages.home.destroy(),"project"===t&&window.Pages&&window.Pages.project&&window.Pages.project.destroy&&window.Pages.project.destroy()}catch{}}function i(e,t){try{if("home"===e&&window.Pages?.home?.init)return window.Pages.home.init(t),!0;if("project"===e&&window.Pages?.project?.init)return window.Pages.project.init(t),!0}catch{}return!1}function r(e,t){return new Promise((n=>{const o=performance.now(),a=()=>{if(i(e,t))return n(!0);if(performance.now()-o>3e3)return n(!1);requestAnimationFrame(a)};a()}))}async function s(e){const t=e&&e.dataset&&e.dataset.barbaNamespace||"";window.dispatchEvent(new CustomEvent("page:enter",{detail:{namespace:t,container:e}}));i(t,e)||await r(t,e),o()}function d(){const e=document.querySelectorAll('[data-barba="wrapper"]');if(e.length>1)for(let t=1;t<e.length;t++)e[t].remove();document.addEventListener("click",(e=>{const n=e.target.closest("a");if(!n)return;if(t(n))return;const o=new URL(n.href,location.href);if(o.pathname===location.pathname&&o.hash)return}),{passive:!0}),barba.init({timeout:8e3,prevent:({el:e})=>t(e),transitions:[{name:"fade-overlay",leave:async({current:e})=>{a(e.container),await n.leave()},enter:async({next:e})=>{window.scrollTo(0,0),await s(e.container),await n.enter()}}]}),barba.hooks.afterLeave((({current:e})=>{a(e.container)})),barba.hooks.afterEnter((({next:e})=>{s(e.container)}))}function c(){const e=document.querySelector('[data-barba="container"]');e&&s(e)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{e()&&d(),c()})):(e()&&d(),c()),window.addEventListener("pageshow",(e=>{e.persisted&&c()}));}();
