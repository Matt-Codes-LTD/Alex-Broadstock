function initCursor(){if(window.__cursorInit)return;window.__cursorInit=!0;const e=document.querySelector(".cursor-crosshair_wrap");if(!e)return;e.querySelectorAll(".cursor-crosshair_line,.cursor-crosshair_dot,.cursor-crosshair_dot-top,.cursor-crosshair_pulse").forEach(e=>{try{e.remove()}catch(e){}});let t=e.querySelector(".cursor-follow_box");t||(t=document.createElement("div"),t.className="cursor-follow_box",e.appendChild(t));let r=e.getBoundingClientRect();const n=()=>{r=e.getBoundingClientRect()};n();const o=new ResizeObserver(n);o.observe(e),addEventListener("scroll",n,{passive:!0});const i=()=>!!(window.gsap&&gsap.quickSetter&&gsap.ticker);let s,a,c,u=!1;function d(){u=!1,a=e=>{t.style.transform=`translate(${e}px, ${c}px)`},c=e=>{t.style.transform=`translate(${s}px, ${e}px)`},t.style.transform=`translate(${s}px, ${c}px)`}function l(){u=!0,a=gsap.quickSetter(t,"x","px"),c=gsap.quickSetter(t,"y","px"),a(s),c(c)}const f=.18;let m=r.width/2,v=r.height/2;s=m,c=v;function y(e){r.width&&r.height||n(),m=e.clientX-r.left,v=e.clientY-r.top}addEventListener("pointermove",y,{passive:!0}),addEventListener("pointerenter",y,{passive:!0}),document.addEventListener("mouseleave",g,!0),document.addEventListener("mouseout",g,!0),document.addEventListener("pointerout",g,!0);let p=null;const h=()=>{s+=(m-s)*f,c+=(v-c)*f,a(s),c(c)};function w(){if(i())u||l(),gsap.ticker.add(h);else if(!p){const e=()=>{h(),p=requestAnimationFrame(e)};d(),p=requestAnimationFrame(e)}}function g(e){if("touch"!==e.pointerType){const t=null==e.relatedTarget,o=e.clientX<=0||e.clientY<=0||e.clientX>=innerWidth||e.clientY>=innerHeight;(t||o)&&(n(),m=r.width/2,v=r.height/2)}}function b(){u&&window.gsap&&gsap.ticker.remove(h),p&&(cancelAnimationFrame(p),p=null)}w(),addEventListener("load",()=>{u||i()&&(b(),l(),gsap.ticker.add(h),u=!0)},{once:!0});const E=()=>{document.hidden?b():w()};document.addEventListener("visibilitychange",E);const R=new MutationObserver(()=>{document.body.contains(e)||(b(),document.removeEventListener("visibilitychange",E),o.disconnect(),R.disconnect())});R.observe(document.body,{childList:!0,subtree:!0})}
