document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".home-hero_wrap").forEach(e=>{if(e.dataset.scriptInitialized)return;e.dataset.scriptInitialized="true";const t=matchMedia("(prefers-reduced-motion: reduce)").matches,n=matchMedia("(prefers-reduced-data: reduce)").matches,o=(navigator.connection||navigator.webkitConnection||navigator.mozConnection)?.effectiveType||"4g",r=n||["slow-2g","2g"].includes(o),a=e.querySelector(".home-hero_video"),i=e.querySelector(".home-hero_list_parent");if(!a||!i)return;i.style.contain="layout paint",i.style.contentVisibility="auto";const c=Array.from(e.querySelectorAll(".home-hero_link"));(()=>{const e=document.head,t=new Set;function n(o){try{const r=new URL(o||"",location.href);if(!r.origin||t.has(r.origin))return;t.add(r.origin);const a=[...e.querySelectorAll('link[rel="preconnect"],link[rel="dns-prefetch"]')].some(e=>(e.href||"").startsWith(r.origin));if(a)return;const i=document.createElement("link");i.rel="preconnect",i.href=r.origin,i.crossOrigin="anonymous",e.appendChild(i);const c=document.createElement("link");c.rel="dns-prefetch",c.href=r.origin,e.appendChild(c)}catch{}}for(let e=0;e<c.length;e++)n(c[e].dataset.video),n(c[e].dataset.videoMain)})();const s=new Map,d=Number(e.getAttribute("data-warm-eager")||3),l=r?1:d;function u(e){if(!e)return null;let t=s.get(e);return t||(t=document.createElement("video"),t.className="home-hero_video_el",t.src=e,t.muted=!0,t.loop=!0,t.playsInline=!0,t.preload="auto",t.crossOrigin="anonymous",a.appendChild(t),s.set(e,t)),t}function m(e){if(!e||e.__warmed||r)return;e.__warmed=!0;const t=()=>{e.play().then(()=>{setTimeout(()=>{e.__keepAlive||(()=>{try{e.pause()}catch{}})()},180)}).catch(()=>{})};e.readyState>=2?t():e.addEventListener("canplaythrough",t,{once:!0})}for(let e=0;e<c.length;e++){const t=u(c[e].dataset.video);t&&(e<l?m(t):(window.requestIdleCallback||((e=>setTimeout(e,300))))(()=>m(t)))}const f=".home-category_ref_text, .home-hero_title, .home-hero_name, .home-hero_heading",p=e=>e.querySelectorAll(e.getAttribute("data-fade-target")||f);let y=null,h=null;function v(e,t){e&&e!==t&&(e.setAttribute("aria-current","false"),p(e).forEach(e=>e.classList.add("u-color-faded"))),t&&(t.setAttribute("aria-current","true"),p(t).forEach(e=>e.classList.remove("u-color-faded")))}function g(e){if(!e)return;try{"fastSeek"in e?e.fastSeek(0):e.currentTime=0}catch{}e.play().catch(()=>{})}function b(n,o){const r=s.get(n)||u(n);r&&(r.__keepAlive=!0,y&&y!==r&&(y.__keepAlive=!1),r!==y&&(y&&y.classList.remove("is-active"),r.classList.add("is-active"),y=r),o&&o!==h&&(v(h,o),h=o),t||g(r))}!function(){const t=Array.from(e.querySelectorAll(".home-hero_list"));for(let e=0;e<t.length;e++){const n=t[e],o=new Set;n.querySelectorAll(".home-category_ref_text").forEach(e=>{const t=(e.textContent||"").replace(/\s+/g," ").trim().toLowerCase();"selected"===t&&e.setAttribute("hidden",""),t&&o.add(t)}),n.dataset.cats=Array.from(o).join("|")}}();const E=(()=>{let t=document.__ghostExitLayer;if(t&&document.body.contains(t))return t;return t=document.createElement("div"),Object.assign(t.style,{position:"fixed",left:"0",top:"0",width:"100vw",height:"100vh",pointerEvents:"none",zIndex:"999",background:"transparent",contain:"layout paint",isolation:"isolate"}),document.body.appendChild(t),document.__ghostExitLayer=t,t})();function S(e){e.querySelectorAll('[data-animate-chars],[data-animate-chars-inner]').forEach(e=>{e.removeAttribute("data-animate-chars"),e.removeAttribute("data-animate-chars-inner")});const t=[e,...e.querySelectorAll("*")];for(let e=0;e<t.length;e++){const n=t[e];n.style.background="transparent",n.style.boxShadow="none",n.style.textShadow="none",n.style.mixBlendMode="normal",n.style.webkitTextFillColor="currentColor"}}function L(e,t){const n=e.cloneNode(!0);n.setAttribute("aria-hidden","true");const o=getComputedStyle(e);return Object.assign(n.style,{color:o.color,position:"fixed",margin:"0",left:t.left+"px",top:t.top+"px",width:t.width+"px",height:t.height+"px",pointerEvents:"none",willChange:"transform,opacity",backfaceVisibility:"hidden",transform:"translateZ(0)",background:"transparent"}),S(n),E.appendChild(n),n}function x(t){const n=Array.from(e.querySelectorAll(".home-hero_list")),o=(t||"").replace(/\s+/g," ").trim().toLowerCase()||"all",r=n.filter(e=>"none"!==e.style.display),a=new Map;for(let e=0;e<r.length;e++)a.set(r[e],r[e].getBoundingClientRect());const c=[],s=[];for(let e=0;e<n.length;e++){const t=n[e],r="all"===o||((t.dataset.cats||"").split("|")).includes(o);r?c.push(t):"none"!==t.style.display&&s.push(t)}const d=[];for(let e=0;e<s.length;e++){const t=s[e],n=a.get(t);if(!n)continue;const o=L(t,n);d.push(o),t.style.display="none"}let l=null;for(let e=0;e<n.length;e++){const t=n[e],o=c.includes(t);o?("none"===t.style.display&&(t.style.display="",t.style.opacity="0"),l||(l=t.querySelector(".home-hero_link"))):s.includes(t)||(t.style.display="none"),t.style.transform="none",t.style.willChange="transform, opacity",t.style.backfaceVisibility="hidden",t.style.transformOrigin="50% 50% 0"}e.querySelectorAll(".home-category_ref_text").forEach(e=>{"selected"===(e.textContent||"").replace(/\s+/g," ").trim().toLowerCase()&&e.setAttribute("hidden","")}),i.style.pointerEvents="none",requestAnimationFrame(()=>{const n=c.filter(e=>"none"!==e.style.display),o=new Map;for(let e=0;e<n.length;e++)o.set(n[e],n[e].getBoundingClientRect());const r=t?0:.36,a=t?0:.32,s=t?0:.3,d="cubic-bezier(.16,.84,.28,1)",u="cubic-bezier(.22,1,.36,1)",m="cubic-bezier(.36,0,.1,1)",f=12,p=[];for(let e=0;e<n.length;e++){const t=n[e],i=a.get(t),c=o.get(t);if(!i){if(a){p.push(t.animate([{opacity:0,transform:"translateY(12px) translateZ(0)"},{opacity:1,transform:"translateY(0px) translateZ(0)"}],{duration:1e3*a,easing:u,delay:e*f,fill:"both"}).finished.catch(()=>{})}else t.style.opacity="",t.style.transform="";continue}const s=i.left-c.left,l=i.top-c.top;(s||l)?p.push(t.animate([{transform:`translate(${s}px, ${l}px) translateZ(0)`},{transform:"translate(0,0) translateZ(0)"}],{duration:1e3*r,easing:d,delay:e*f,fill:"both"}).finished.catch(()=>{})):t.style.opacity=""}for(let e=0;e<d.length;e++){const t=d[e];p.push(t.animate([{opacity:1,transform:"translateY(0px) translateZ(0)"},{opacity:0,transform:"translateY(-10px) translateZ(0)"}],{duration:1e3*s,easing:m,delay:e*f,fill:"both"}).finished.then(()=>{t.remove()}).catch(()=>{try{t.remove()}catch{}}))}Promise.allSettled(p).finally(()=>{n.forEach(e=>{e.style.willChange="",e.style.opacity="",e.style.transform="",e.style.backfaceVisibility=""}),i.style.pointerEvents="",h&&"none"===h.closest(".home-hero_list")?.style.display&&l&&(()=>{const e=l.dataset.video;e&&b(e,l)})();document.activeElement&&"none"===document.activeElement.closest(".home-hero_list")?.style.display&&l&&l.focus({preventScroll:!0})})})}(!function(){const t=".home-category_text",n=document.querySelector(".home_hero_categories");if(!n)return;function o(){const o=Array.from(n.querySelectorAll(t));let r=o.find(e=>"all"===(e.textContent||"").replace(/\s+/g," ").trim().toLowerCase())||null;if(!r){const e=document.createElement("div");e.setAttribute("role","listitem"),e.className="home-hero_category u-text-style-main w-dyn-item";const o=document.createElement("a");o.href="#",o.className="home-category_text u-text-style-main",o.textContent="All",o.setAttribute("data-animate-chars",""),o.setAttribute("aria-current","true"),o.setAttribute("data-animate-delay",n.getAttribute("data-animate-delay")||"0.012"),e.appendChild(o),n.insertBefore(e,n.firstChild),r=o}return r}function r(e){const o=(e||"").replace(/\s+/g," ").trim().toLowerCase();n.querySelectorAll(t).forEach(e=>{const t=(e.textContent||"").replace(/\s+/g," ").trim().toLowerCase()===o;e.setAttribute("aria-current",t?"true":"false"),e.classList.toggle("u-color-faded",!t)})}o(),r("All"),x("All"),n.addEventListener("click",e=>{const o=e.target.closest(t);if(!o||!n.contains(o))return;e.preventDefault();const a=o.textContent||"All";r(a),x(a)},{passive:!1})}(),c.length){const e=c[0],t=e.dataset.video,n=u(t);n&&(n.__keepAlive=!0),b(t,e)}function O(e){const t=e.target.closest?.(".home-hero_link");if(!t||!i.contains(t)||t===h)return;const n=t.dataset.video;n&&b(n,t)}i.addEventListener("pointerover",O,{passive:!0}),i.addEventListener("focusin",O),i.addEventListener("touchstart",O,{passive:!0}),document.addEventListener("visibilitychange",()=>{document.hidden&&a.querySelectorAll(".home-hero_video_el").forEach(e=>{try{e.pause()}catch{}})})})});
